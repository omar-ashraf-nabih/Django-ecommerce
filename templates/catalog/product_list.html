{% extends "base.html" %}
{% block title %}المنتجات{% endblock %}
{% block content %}

<section class="hero">
  <div>
    <h1 class="hero__title">منتجاتنا</h1>
    <p class="hero__subtitle">قم باختيار منتجاتك , سيتم تحويل الطلب والدفع كاش عند الاستلام.</p>
  </div>
  <a class="btn btn--primary" href="{% url 'cart' %}">اذهب للسلة</a>
</section>

<div class="grid">
  {% for p in products %}
    <article class="card">
      <a class="card__media" href="{% url 'product_detail' p.slug %}">
        {% if p.image %}
          <img src="{{ p.image.url }}" alt="{{ p.name }}">
        {% else %}
          <div class="placeholder">بدون صورة</div>
        {% endif %}
      </a>

      <div class="card__body">
        <div class="card__title">{{ p.name }}</div>
        <div class="card__desc">{{ p.description|default:""|truncatechars:90 }}</div>

        <div class="card__row">
          <div class="price">{{ p.price }} EGP</div>

          <form method="post" action="{% url 'cart_add' p.id %}">
            {% csrf_token %}
            <input type="hidden" name="qty" value="1">
            <button class="btn btn--ghost" type="submit">أضف للسلة</button>
          </form>
        </div>
      </div>
    </article>
  {% empty %}
    <div class="empty">
      لا توجد منتجات الآن. أضف منتجات من لوحة التحكم.
    </div>
  {% endfor %}
</div>

{% endblock %}
